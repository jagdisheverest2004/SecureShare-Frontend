<div class="layout" [class.sidebar-closed]="isSidebarClosed">
  <!-- Hamburger (only if sidebar is closed) -->
  <button class="hamburger" *ngIf="isSidebarClosed" (click)="toggleSidebar()">
    <span></span><span></span><span></span>
  </button>

  <!-- Sidebar -->
  <app-sidebar (sidebarToggle)="onSidebarToggle($event)"></app-sidebar>

  <!-- Main Content -->
  <div class="content">
    <h1 class="page-title">Dashboard</h1>
    <p class="quote">"Overview of your uploads and stats"</p>

    <div class="dashboard">
      <!-- Row 1 -->
      <div class="row">
        <div class="card flex-2">
          <h3>📈 Uploads Summary</h3>
          <canvas
            baseChart
            [data]="lineChartData"
            [options]="lineChartOptions"
            [type]="'line'"
          ></canvas>
        </div>
        <div class="card flex-1">
          <h3>📂 Category Distribution</h3>
          <canvas
            baseChart
            [data]="doughnutChartData"
            [options]="doughnutChartOptions"
            [type]="'doughnut'"
          ></canvas>
          <div class="category-grid">
            <div
              class="category-item"
              *ngFor="let cat of categoryStats; let i = index"
            >
              <span
                class="category-color"
                [style.background]="chartColors[i]"
              ></span>
              <span>{{ cat.label }}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Row 2 -->
      <div class="row">
        <div class="card flex-1">
          <h3>📑 Recent Uploads</h3>
          <table>
            <thead>
              <tr>
                <th>File</th>
                <th>Category</th>
                <th>Date</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let file of recentUploads">
                <td>{{ trimFilename(file.name) }}</td>
                <td>{{ file.category }}</td>
                <td>{{ file.date }}</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="card flex-1">
          <h3>📊 Uploads by Category</h3>
          <canvas
            baseChart
            [data]="barChartData"
            [options]="barChartOptions"
            [type]="'bar'"
          ></canvas>
        </div>
      </div>

      <!-- Row 3 -->
      <div class="row">
        <div class="card flex-2">
          <h3>🔵 Circular Stats</h3>
          <div class="circle-row">
            <div class="circle-card" *ngFor="let cat of categoryStats">
              <div class="circle">{{ cat.value }}</div>
              <p>{{ cat.label }}</p>
            </div>
          </div>
        </div>
        <div class="card flex-1">
          <h3>🔥 Most Uploaded Trend</h3>
          <canvas
            baseChart
            [data]="miniLineChartData"
            [options]="miniLineChartOptions"
            [type]="'line'"
          ></canvas>
        </div>
      </div>
    </div>
  </div>

  <!--  Help Icon -->
  <div
    class="guide-icon"
    title="Click here to view the user guide for this page"
    (click)="openGuide()"
  >
    ❔
  </div>

  <!-- Education Icon with Suggestion -->
  <div class="education-wrapper">
    <div
      class="education-icon"
      title="Click here to learn about cybersecurity & app security"
      (click)="openEducation()"
    >
      📘
    </div>

    <!-- Tooltip suggestion -->
    <div class="edu-suggestion" *ngIf="showEduSuggestion">
      📘 You are advised to read this User Education
      <span class="arrow"></span>
    </div>
  </div>

  
  <div class="guide-icon" title="Click here to view the user guide for this page" (click)="openGuide()">❔</div>

  <!-- Education Icon with Suggestion -->
  <div class="education-wrapper">
    <div class="education-icon" title="Click here to learn about cybersecurity & app security" (click)="openEducation()">📘</div>
    <div class="edu-suggestion" *ngIf="showEduSuggestion">
      📘 You are advised to read this User Education
      <span class="arrow"></span>
    </div>
  </div>

  <!-- Guide Overlay -->
  <div class="guide-overlay" *ngIf="showGuide">
    <div class="guide-box">
      <h2>{{ steps[currentStep].title }}</h2>
      <p>{{ steps[currentStep].text }}</p>
      <div class="guide-buttons">
        <button (click)="prevStep()" [disabled]="currentStep === 0">Back</button>
        <button (click)="nextStep()">
          {{ currentStep === steps.length - 1 ? 'Finish' : 'Next ' }}
        </button>
      </div>
      <button class="skip-btn" (click)="skipGuide()">Skip Guide ✖</button>
    </div>
  </div>

  <!-- 🔵 User Education Overlay -->
  <div class="education-overlay" *ngIf="showEducation">
    <div class="education-box">
      <button class="close-edu" (click)="closeEducation()">✖</button>
      <h2>📘 User Education</h2>

     <div class="edu-content">
  <h3>🌍 Why we created this app?</h3>
  <p>
    We live in a digital world where your <b>data</b> is your identity.
    Keeping it safe is critical.
  </p>

  <h3>🔐 How are your files protected?</h3>
  <p>
    All your uploaded files are <b>securely encrypted</b> before storage.
    This means nobody (not even us) can view your files unless you
    explicitly share them.
  </p>

  <h3>🚨 Be Aware of Cyber Attacks</h3>
  <ul>
    <li>🎣 <b>Phishing Emails</b> → Fake mails tricking you to share passwords.</li>
    <li>💻 <b>Malware</b> → Harmful files disguised as normal downloads.</li>
    <li>👀 <b>Data Breaches</b> → Hackers stealing data from weak apps.</li>
    <li>💳 <b>Financial Fraud</b> → Hackers may steal money if they get your info.</li>
    <li>📞 <b>Phone Scams</b> → Fraudsters posing as bank/tech support.</li>
    <li>🎭 <b>Impersonation Attacks</b> → Hackers pretending to be friends or colleagues.</li>
  </ul>

  <h3>📂 Safe File Sharing</h3>
  <ul>
    <li>✔ Always verify the recipient’s identity before sharing files.</li>
    <li>✔ Avoid sharing sensitive files.</li>
  </ul>

  <h3>🛡 Device & Network Safety</h3>
  <ul>
    <li>📱 Keep your phone and computer updated with the latest patches.</li>
    <li>🦠 Install trusted antivirus & enable firewalls.</li>
    <li>🌐 Use a <b>VPN</b> when on public Wi-Fi.</li>
    <li>📶 Change your Wi-Fi password regularly.</li>
    <li>🔌 Turn off Bluetooth & Wi-Fi when not in use.</li>
  </ul>

  <h3>🔏 Data Privacy Practices</h3>
  <ul>
    <li>⚙ Review app permissions regularly (camera, mic, contacts).</li>
    <li>☁ Store data only on secure, encrypted cloud services.</li>
    <li>📸 Don’t overshare personal info on social media.</li>
    <li>🕵️ Be cautious when granting “Always Allow” access.</li>
  </ul>

  <h3>💾 Backup & Recovery</h3>
  <ul>
    <li>💿 Follow the <b>3-2-1 rule</b>: 3 copies, 2 mediums, 1 offsite.</li>
    <li>🔑 Always encrypt backups before storage.</li>
    <li>🛡 Keep offline backups safe from ransomware attacks.</li>
    <li>⏱ Test recovery regularly to ensure files can be restored.</li>
  </ul>

  <h3>📱 Safe Mobile Usage</h3>
  <ul>
    <li>📥 Download apps only from official stores (Play Store, App Store).</li>
    <li>🔍 Review app permissions before installing.</li>
    <li>💳 Be careful when using mobile banking on public Wi-Fi.</li>
    <li>📲 Ignore suspicious SMS links or OTP requests.</li>
  </ul>

  <h3>💼 Work & Remote Security</h3>
  <ul>
    <li>🖥 Always use company VPN for remote work.</li>
    <li>📂 Don’t save company files on personal devices.</li>
    <li>📧 Watch out for fake “work-related” phishing emails.</li>
    <li>🔒 Lock your device when leaving it unattended.</li>
  </ul>

  <h3>✅ Quick Checklist</h3>
  <p>Follow this daily checklist to stay secure:</p>
  <ul>
    <li>🔒 Strong password + 2FA enabled</li>
    <li>🛠 Devices & apps updated</li>
    <li>📂 Sensitive files encrypted & backed up</li>
    <li>🚫 Avoid suspicious links/emails</li>
    <li>🌐 Use VPN on public Wi-Fi</li>
  </ul>

  <h3>🎯 Summary</h3>
  <p>
    Your files are always encrypted 🔐.<br />
    Sharing = safe, when you trust the recipient.<br />
    Security = daily habit, not one-time setup.<br />
    Stay smart, stay secure, and safeguard your digital identity 🌍✨.
  </p>
</div>

  </div>
</div>
